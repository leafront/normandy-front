<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>计算收支--明细</title>
    <link rel="stylesheet" href="/styles/revenue/index.css"/>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>
<%include ../common/header.ejs%>
<div class="container clearfix">
    <% include ../common/aside_menu.ejs %>
    <div class="right-container fr">
        <div class="navigation">
            <a href="/" class="home_ico"></a>
            <em class="navigation_ico"></em>
            <span>计算收支明细</span>
        </div>
        <div class="content" id="app">
            <div class="cont-title">
                <i></i>
                <span>计算收支明细</span>
            </div>
            <div class="revenue_add">
               <div class="vehicle_info_title">
                   <div class="business_status">
                       <h4>借款信息</h4>
                   </div>
               </div>
                <div class="vehicle_info_wraper clearfix">
                    <div class="vehicle_item">
                        <div class="form-group clearfix">
                            <div class="form-group-rows" :class="{'form-group-error':(!isValidate && revenue.amount === '')}">
                                <label>借款金额</label>
                                <div class="user-ui-number">
                                  <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="借款金额">
                                   <i class="user-ui-input-txt">元</i>
                                </div>

                            </div>
                            <div class="form-group-rows" :class="{'form-group-error':(!isValidate && revenue.repay_type === '')}">
                                <label>还款类型</label>
                                <div class="drop_menu drop_menu_edit">
                                    <span class="js_select">{{ loanType }}</span>
                                    <ul class="drop_menu_list">
                                        <% repaymentType.forEach(function(item){%>
                                        <li @click="checkValue('repay_type',<%-item.value%>)">
                                            <a href="javascript:;"><%-item.name%></a>
                                        </li>
                                        <%})%>
                                    </ul>
                                 </div>
                            </div>
                        </div>
                        <div class="form-group clearfix">
                            <div class="form-group-rows">
                                <label :class="{'error_text':(!isValidate && revenue.term === '')}">借款期限</label>
                                <input type="number" class="user-ui-input" :class="{'error_input':(!isValidate && revenue.term === '')}" v-model="revenue.term" placeholder="借款期限"/>
                                <div class="drop_menu drop_menu_term" :class="{'form-group-error':(!isValidate && revenue.term_unit === '')}">
                                    <span class="js_select">请选择</span>
                                    <ul class="drop_menu_list">
                                        <% termUnit.forEach(function(item){%>
                                        <li @click="checkValue('term_unit',<%-item.value%>)">
                                            <a href="javascript:;"><%-item.name%></a>
                                        </li>
                                        <%})%>
                                    </ul>
                                </div>
                            </div>
                            <div class="form-group-rows vehicles-base-input" :class="{'form-group-error':(!isValidate && revenue.interest_rate === '')}">
                                <label>综合服务费率</label>
                                <div class="user-ui-number">
                                    <input type="text" class="user-ui-input user-ui-month" v-model="revenue.interest_rate" placeholder="综合服务费率">
                                    <i class="user-ui-input-txt">% / 期</i>
                                </div><button class="edit_btn_custom" @click="customStage">自定义</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="vehicle_info_title">
                    <div class="business_status">
                        <h4>费用收</h4>
                        <span>(相应项留空即无该费用)</span>
                    </div>
                </div>
                <div class="vehicle_info_wraper clearfix">
                  <div class="vehicle_item">
                    <div class="form-group clearfix">
                        <div class="form-group-rows" :class="{'form-group-error':(!isValidate && revenue.amount === '')}">
                            <label>中介费(预收)</label>
                            <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="中介费">
                              <i class="user-ui-input-txt">元</i>
                            </div>
                        </div>
                        <div class="form-group-rows" :class="{'form-group-error':(!isValidate && revenue.repay_type === '')}">
                            <label>评估费(预收)</label>
                            <div class="user-ui-number">
                                <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="评估费">
                                <i class="user-ui-input-txt">元</i>
                            </div>
                        </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows">
                          <label>违章押金(押金)</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="违章押金">
                              <i class="user-ui-input-txt">元</i>
                          </div>
                      </div>
                      <div class="form-group-rows">
                          <label>GPS押金(押金)</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="GPS押金">
                              <i class="user-ui-input-txt">元</i>
                          </div>
                      </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows">
                          <label>停车费用(每期收)</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="停车费用">
                              <i class="user-ui-input-txt">元/月</i>
                          </div>
                      </div>
                      <div class="form-group-rows">
                          <label>GPS费用(每期收)</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="GPS费用">
                              <i class="user-ui-input-txt">元/月</i>
                          </div>
                      </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows">
                          <label>风险押金(押金)</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="风险押金">
                              <i class="user-ui-input-txt">元</i>
                          </div>
                      </div>
                      <div class="form-group-rows">
                          <label>风险押金费率</label>
                          <div class="user-ui-number">
                              <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="留空使用综合服务费用">
                              <i class="user-ui-input-txt">% / 期</i>
                          </div>
                      </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows form-group-fee vehicles-base-input">
                          <label :class="{'error_text':(!isValidate && revenue.fees.other_fee.name === '')}">自定费用</label>
                          <input type="text" placeholder="费用名称" :class="{'error_input':(!isValidate && revenue.fees.other_fee.name === '')}" v-model="revenue.fees.other_fee.name" class="user-ui-input  edit-ui-input">
                          <div class="user-ui-number">
                            <input type="number" placeholder="自定费用" :class="{'error_input':(!isValidate && revenue.fees.other_fee.value === '')}" v-model="revenue.fees.other_fee.value" class="user-ui-input  edit-ui-input">
                            <i class="user-ui-input-txt" :class="{'error_text':(!isValidate && revenue.fees.other_fee.value === '')}">元</i>
                          </div>
                          <button class="form-group-btn">+</button>
                      </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows form-group-fee vehicles-base-input">
                          <label :class="{'error_text':(!isValidate && revenue.fees.other_fee.name === '')}">其他押金(押金)</label>
                          <input type="text" placeholder="收款原因" :class="{'error_input':(!isValidate && revenue.fees.other_fee.name === '')}" v-model="revenue.fees.other_fee.name" class="user-ui-input  edit-ui-input">
                          <div class="user-ui-number">
                              <input type="number" placeholder="其他押金" :class="{'error_input':(!isValidate && revenue.fees.other_fee.value === '')}" v-model="revenue.fees.other_fee.value" class="user-ui-input  edit-ui-input">
                              <i class="user-ui-input-txt" :class="{'error_text':(!isValidate && revenue.fees.other_fee.value === '')}">元</i>
                          </div>
                          <button class="form-group-btn">+</button>
                      </div>
                    </div>
                    <div class="form-group clearfix">
                      <div class="form-group-rows form-group-fee vehicles-base-input">
                          <label :class="{'error_text':(!isValidate && revenue.fees.other_fee.name === '')}">其他费用(每期收)</label>
                          <input type="text" placeholder="收款原因" :class="{'error_input':(!isValidate && revenue.fees.other_fee.name === '')}" v-model="revenue.fees.other_fee.name" class="user-ui-input  edit-ui-input">
                          <div class="user-ui-number">
                              <input type="number" placeholder="其他费用" :class="{'error_input':(!isValidate && revenue.fees.other_fee.value === '')}" v-model="revenue.fees.other_fee.value" class="user-ui-input  edit-ui-input">
                              <i class="user-ui-input-txt" :class="{'error_text':(!isValidate && revenue.fees.other_fee.value === '')}">元</i>
                          </div>
                          <button class="form-group-btn">+</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="vehicle_info_title">
                    <div class="business_status">
                        <h4>费用付</h4>
                        <span>(相应项留空即无该费用)</span>
                    </div>
                </div>
                <div class="vehicle_info_wraper clearfix">
                    <div class="vehicle_item">
                        <div class="form-group clearfix">
                            <div class="form-group-rows">
                                <label>账户管理费用(预付)</label>
                                <div class="user-ui-number">
                                    <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="账户管理费用">
                                    <i class="user-ui-input-txt">元</i>
                                </div>
                            </div>
                            <div class="form-group-rows">
                                <label>保证金(押金)</label>
                                <div class="user-ui-number">
                                    <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="保证金">
                                    <i class="user-ui-input-txt">元/月</i>
                                </div>
                            </div>
                        </div>
                        <div class="form-group clearfix">
                            <div class="form-group-rows">
                                <label>资方费率</label>
                                <div class="user-ui-number">
                                    <input type="text" class="user-ui-input edit-ui-input" v-model="revenue.amount" placeholder="账户管理费用">
                                    <i class="user-ui-input-txt">%/期</i>
                                </div>
                            </div>
                            <div class="form-group-rows">
                                <label>资方还款方式</label>
                                <div class="drop_menu drop_menu_edit">
                                    <span class="js_select">{{ loanType }}</span>
                                    <ul class="drop_menu_list">
                                        <% repaymentType.forEach(function(item){%>
                                        <li @click="checkValue('repay_type',<%-item.value%>)">
                                            <a href="javascript:;"><%-item.name%></a>
                                        </li>
                                        <%})%>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="revenue_submit">
                <button class="btn_confirm">申请</button>
                <button class="btn_cancel">放弃</button>
            </div>
        </div>
        <% include ../common/footer.ejs %>
    </div>
</div>

<div class="popup_wraper" id="popup">
    <div class="popup_title">
        <h4>自定义还款</h4>
    </div>
    <div class="popup_cont">
        <div class="popup_cont_type">
            <ul class="popup_menu">
                <li>指定期</li>
                <li>综合管理费</li>
                <li>还本金额</li>
            </ul>
        </div>
        <div class="const_wraper">



            <div class="cost_item" v-for="(item,index) in repay_schema">
                <div class="drop_menu drop_menu_stage" :class="{'active':dropMenu[index].isOpen}">
                    <span @click.stop="showMenu(!dropMenu[index].isOpen,index)">{{'第' + item.term + '期'}}</span>
                    <ul class="drop_menu_list">
                        <li v-for="child in stage" @click="selectValue(index,child)">
                            <a href="javascript:;">第{{child}}期</a>
                        </li>
                    </ul>
                </div>
                <div class="const_money">
                    <div class="user-ui-number">
                        <input type="number" placeholder="综合管理费" v-model="item.interest" class="user-ui-input"/>
                        <i class="user-ui-input-txt">元</i>
                    </div>
                </div>
                <div class="const_money">
                    <div class="user-ui-number">
                        <input type="number" placeholder="还本金额" v-model="item.capital" class="user-ui-input"/>
                        <i class="user-ui-input-txt">元</i>
                    </div>
                </div>
                <button class="form-group-btn" v-if="index==0" @click="addRecord(1)">+</button>
                <button class="form-group-btn btn_gray" v-else @click="removeRecord(index)">-</button>
            </div>
        </div>
    </div>
    <div class="popup_submit clearfix">
        <button class="btn_confirm" @click="addStage">添加</button>
        <button class="btn_cancel" @click="hidePopup">取消</button>
    </div>
</div>
<div class="popup_mask" @click="hidePopup"></div>
<script type="text/javascript" src="/dist/scripts/revenue/index.js"></script>
</body>
</html>

